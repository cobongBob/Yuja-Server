<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="/chat_css/chat.css" />
<title>Yuja Chat</title>
</head>

{{! 채팅방 들어갈때 -> 채팅 기록 남은거 보여주는 div }}

<body>
<div class="whoBox">
	<div class="ChatWho">
  		<img class="ChatWhoImg" src="{{receiverPic}}" alt="" />
	</div>
	<div class="chatWhoName">
		{{receiver}}
	</div>
</div>
   <div id="ChatLogsWrapper">
   <div style="text-align: center;">
   	<span style="color:grey">메세지는 최대 2주 동안 보관됩니다</span>
   	<hr />
   </div>
   	<div id="chatLog">
      {{#messages}}
         {{#ownerOrNot}}
         
         <div class="ChatSenderBigWrapper">
            <div class="ChatSenderWrapper">
	            <div class="SenderChatMessageContent"><div><p class="ChatContent">{{content}}</p></div><span class="SenderChatDate">{{createdDate}}</span></div>
            </div>
         </div>
         {{/ownerOrNot}}
         {{^ownerOrNot}}
         
         <div class="ChatReceiverBigWrapper">
            <div class="ChatReceiverWrapper">
	            <div class="ReceiverImgWrapper">
	            	<img class="ChatReceiverProfileImg" src="{{receiverPic}}" alt="" />
	            </div>
               <div class="ChatMessageReceiver">{{sender}}</div>
               <div class="ReceiverChatMessageContent"><div><p class="ChatContent">{{content}}</p></div><span class="ReceiverChatDate">{{createdDate}}</span></div>
            </div>
         </div>
         {{/ownerOrNot}}
      {{/messages}}
      </div>
   </div>
   <div class="MessageInputWrapper">
   	<div class="submitBox">
   	<form onsubmit="return send()">
   	  <button class="MessageButtonL" type="button" onclick="location.href='/rooms'">◀</button>
      <input class="MessageInput" type="text" id="message" placeholder="메세지를 적어주세요" autocomplete="off" maxlength="2000"/>
      <button class="MessageButtonR" type="button" onclick="return send()">💬</button>
    </form>
    </div>
   </div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.4.0/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
const receiver = "{{{receiver}}}";
const username = "{{{username}}}";
const roomId = "{{{roomId}}}";
const senderPic = "{{{senderPic}}}";
const receiverPic = "{{{receiverPic}}}";
</script>
<script src="/js/chat/chat.js"></script>
</html>